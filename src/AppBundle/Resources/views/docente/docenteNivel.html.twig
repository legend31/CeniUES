{% extends "::layoutbase.html.twig" %}

{% block title %} Asignar niveles {% endblock %}

{% block principal %}
    <head>
        <script src="{{ asset("libs/AdminLTE-2.2.0/plugins/jQuery/jQuery-2.1.4.min.js") }}" type="text/javascript"></script>
    </head>
    <section class="content">
        <div class="row">
            <div class="col-xs-12">
                <div class="box box-danger">
                    <div class="box-header">
                        <h3 class="box-title">Asignar docentes en niveles</h3>


                        <!--Impresion de errores-->
                        <!--Docente no existen-->
                        {% if error == 1 %}
                            <div class="alert alert-danger alert-dismissable">
                                <h4><i class="icon fa fa-ban"></i> Docentes no existen</h4>
                                <b>Error</b> no existe ning&uacute;n docente dentro del sistema.
                            </div>

                        <!--clases-->
                        {% elseif error == 2 %}
                            <div class="alert alert-danger alert-dismissable">
                                <h4><i class="icon fa fa-ban"></i> Clases no definidos</h4>
                                <b>Error</b> no se han encontrado grupos de clases en el sistema.
                            </div>

                        {% endif %}
                        <!--Fin impresion de errores-->

                    </div><!-- /.box-header -->
                    <div class="box-body table-responsive no-padding">
                        <table class="table table-hover">
                            <tbody>
                            <tr>
                                <th>Carnet</th>
                                <th>Docente</th>
                                <th>Nivel Asignado</th>
                                <th>Local</th>
                                <th>Facultad</th>
                                <th>Hora Clase</th>
                                <th>Opciones</th>
                            </tr>
                            {% for clase in clases %}
                                {% if clase.docenteCarnetdocente %}
                                    <tr>
                                        <td>{{ clase.docenteCarnetdocente.carnetdocente }}</td>
                                        <td>{{ clase.docenteCarnetdocente.primernombredocente }} {{ clase.docenteCarnetdocente.primerapellidodocente }}</td>
                                        <td>{{ clase.nivelnivel.nombrenivel }}</td>
                                        <td>{{ clase.locallocal.nombrelocal }}</td>
                                        <td>{{ clase.locallocal.nombrefacultad }}</td>
                                        <td>{{ clase.horario.format('h:i A') }}</td>
                                        <td>
                                            <div class="fc-button-group">
                                                <a class="btn btn-default bg-aqua-gradient" href="#">
                                                    <i class="fa fa-undo"></i> Reasignar
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                            {% if form %}
                                    <tr>
                                        <td>{{ form.0.6.6 }}</td>
                                        <td>{{ form.0.6.6 }}</td>
                                        <td><i>No definido</i></td>
                                        <td><i>No definido</i></td>
                                        <td><i>No definido</i></td>
                                        <td><i>No definido</i></td>
                                        <td>
                                            <div class="fc-button-group">
                                                <a class="btn btn-default col-sm-8 bg-green-gradient" href="#">
                                                    <i class="fa fa-check"></i> Asignar
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                            {% endif %}
                            </tbody>
                        </table>
                    </div><!-- /.box-body -->
                </div><!-- /.box -->
            </div>
        </div>
    </section>

    <script>
        $('document').ready(function(){
            $("#niv").change(function(){
                var niv = $(this).val();

                if(niv>0){

                    var datos ={
                        idniv : $(this).val()
                    };

                    $.post("{{ path('js2') }}", datos, function(response){

                        var $combosec = $('#sec');
                        var $loca = $('#local');

                        $combosec.empty();

                        $.each(response,function(i, val){
                            $combosec.append("<option>"+ "Seccion " + val +"</option>");
                        });
                    },'json');
                }else{
                    //limpiamos combo y pedimos que seleccione un nivel
                    var $combosec = $('#sec');
                    $combosec.empty();
                    $combosec.val("Seleccione un nivel");
                }
            });
        });
    </script>
{% endblock %}
